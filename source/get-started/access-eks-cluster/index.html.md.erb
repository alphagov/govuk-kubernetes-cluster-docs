---
title: Access EKS cluster
weight: 22
last_reviewed_on: 2022-02-01
review_in: 6 months
---

# Access EKS cluster

## Prerequisites

To follow this guide you will need to have:

1. [AWS access](https://docs.publishing.service.gov.uk/manual/get-started.html#7-get-aws-access)
2. gds-cli [installed](https://docs.publishing.service.gov.uk/manual/get-started.html#3-install-gds-command-line-tools) and [set up](https://docs.publishing.service.gov.uk/manual/get-started.html#8-access-aws-for-the-first-time).

## Assuming roles and testing access

1. Assume the proper IAM role using [gds-cli](https://github.com/alphagov/gds-cli#usage) by
exporting the AWS credentials for the GOV.UK environment and role that you wish:

    ```sh
    eval $(gds aws govuk-<govuk-environment>-<role> -e --art 8h)
    export AWS_REGION=eu-west-1
    ```

     where:
     - `<govuk-environment>` is the the GOV.UK environment that you want to get credentials for. For example, `test`, `integration`
     - `<role>` is the role mentioned in this [deploying terraform documentation](https://docs.publishing.service.gov.uk/manual/deploying-terraform.html#1-check-that-you-have-sufficient-access)
     - `art` option is used to request that the AWS credentials last for the requested time.

    For the user research session , you should use the `eval $(gds aws govuk-integration-admin -e --art 8h)` command since
    the session is run in the Integration GOV.UK cluster and `admin` role will allow full access.

2. If it's your first time accessing the cluster through Kubectl:

    ```sh
    aws eks update-kubeconfig --name govuk
    ```

    This will add the govuk cluster to your Kubectl configuration in `~/.kube/config`

3. To check that you have access, run:

    ```sh
    kubectl cluster-info
    ```

    If you have access this should return information about the GOV.UK EKS cluster control plane, it should look like this:

    ```sh
    Kubernetes control plane is https://{GOVUK_CLUSTER_ADDRESS}.{AWS_REGION}.eks.amazonaws.com
    ```
