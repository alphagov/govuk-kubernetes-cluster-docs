---
title: How the platform works
weight: 60
last_reviewed_on: 2022-02-01
review_in: 6 months
---

# How the platform works

The GOV.UK Kubernetes platform is an AWS-hosted [Kubernetes](https://kubernetes.io) cluster, using Amazon's [Elastic Kubernetes Service](https://aws.amazon.com/eks/) (EKS).

For information on how Kubernetes works in general, see the:

- [Kubernetes documentation](https://kubernetes.io/docs/home/)
- [Amazon EKS documentation](https://docs.aws.amazon.com/eks/latest/userguide/what-is-eks.html)
- Linux foundation free [introduction to Kubernetes training certification](https://training.linuxfoundation.org/training/introduction-to-kubernetes/)

Specific to its implementation of Kubernetes, the GOV.UK Kubernetes platform cluster:

- uses add-ons to manage storage and secrets
- authenticates platform cluster users using an `aws-auth` ConfigMap

## Platform cluster add-ons

The GOV.UK Kubernetes platform cluster uses the following add-ons in its implementation of Kubernetes:

- External secrets
- External DNS
- AWS load balancer controller
- Cluster autoscaler
- Dex OpenID connect provider

### External secrets

The [External-secrets add-on](https://github.com/alphagov/govuk-infrastructure/blob/main/terraform/deployments/cluster-services/external_secrets.tf):

- retrieves secrets from [AWS Secrets Manager](https://aws.amazon.com/secrets-manager/)
- makes those secrets available to GOV.UK applications as standard [Kubernetes Secret objects](https://kubernetes.io/docs/concepts/configuration/secret/)

See the [External secrets documentation](https://external-secrets.io/) for more information.

### External DNS

The [External DNS add-on](https://github.com/alphagov/govuk-infrastructure/blob/main/terraform/deployments/cluster-services/external_dns.tf) creates and manages [Domain Name System (DNS)](https://aws.amazon.com/route53/what-is-dns/) records in [AWS Route 53](https://aws.amazon.com/route53/) for [exposed or publicly discoverable Kubernetes services](https://kubernetes.io/docs/tutorials/kubernetes-basics/expose/expose-intro/).

See the [External DNS documentation](https://github.com/kubernetes-sigs/external-dns) for more information.

### AWS load balancer controller

The [AWS load balancer controller add-on](https://github.com/alphagov/govuk-infrastructure/blob/main/terraform/deployments/cluster-services/aws_lb_controller.tf) creates and manages [AWS load balancers](https://docs.aws.amazon.com/elasticloadbalancing/latest/classic/introduction.html) based on [Kubernetes Ingress objects](https://kubernetes.io/docs/concepts/services-networking/ingress/) in the cluster.

See the [AWS load balancer controller documentation](https://docs.aws.amazon.com/eks/latest/userguide/aws-load-balancer-controller.html) for more information.

### Cluster autoscaler

The [Cluster autoscaler add-on](https://github.com/alphagov/govuk-infrastructure/blob/main/terraform/deployments/cluster-services/cluster_autoscaler.tf) automatically adjusts the size of the Kubernetes cluster by:

- adding [worker nodes](https://kubernetes.io/docs/concepts/architecture/nodes/) to the cluster when the cluster is running low on capacity to make sure there's enough capacity for [Kubernetes to schedule those pods](https://kubernetes.io/docs/concepts/scheduling-eviction/kube-scheduler/)
- removing worker nodes when the cluster has spare capacity

The add-on does this by controlling the [AWS EC2 auto scaling group](https://docs.aws.amazon.com/autoscaling/ec2/userguide/AutoScalingGroup.html) for the [managed node group](https://docs.aws.amazon.com/eks/latest/userguide/managed-node-groups.html).

See the [Cluster autoscaler documentation](https://github.com/kubernetes/autoscaler/tree/master/cluster-autoscaler) for more information.

### Dex OpenID connect provider

The [Dex OpenID connect provider](https://github.com/alphagov/govuk-infrastructure/blob/main/terraform/deployments/cluster-services/dex.tf) is a [federated identity provider](https://en.wikipedia.org/wiki/Federated_identity).

The GOV.UK Kubernetes platform cluster uses Dex to manage single sign-on to services in the cluster such as [Grafana dashboards](https://docs.publishing.service.gov.uk/manual/grafana.html) and [Argo CD](/get-started/access-eks-cluster/#access-eks-cluster).

Dex acts as an intermediary between apps that are restricted to authorised users and apps that know how to verify a user's identity.

See the [Dex OpenID connect provider documentation](https://dexidp.io/docs/) for more information.

## Platform cluster user authentication

The GOV.UK Kubernetes platform cluster authenticates users using an [`aws-auth` ConfigMap](https://github.com/alphagov/govuk-infrastructure/blob/main/terraform/deployments/cluster-services/aws_auth_configmap.tf) in the `kube-system` [namespace](https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/).

The ConfigMap maps a user's AWS IAM role to the equivalent role in the [Kubernetes role-based access control system](https://kubernetes.io/docs/reference/access-authn-authz/rbac/).

The list of authenticated users for the different environments in the platform is located in the [`govuk-aws-data/data/infra-security/` GitHub repo on alphagov](https://github.com/alphagov/govuk-aws-data/tree/master/data/infra-security).

You must be in the [GOV.UK team on alphagov](https://github.com/orgs/alphagov/teams/gov-uk) to make changes to this list.

See the [AWS documentation on enabling IAM user and role access to your cluster](https://docs.aws.amazon.com/eks/latest/userguide/add-user-role.html) for more information.
